<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "ea4bbe640847aafbbba14dae4625e9af",
  "translation_date": "2025-05-19T17:38:19+00:00",
  "source_file": "07-building-chat-applications/README.md",
  "language_code": "hk"
}
-->
# 構建生成式 AI 驅動的聊天應用程式

現在我們已經了解如何構建文本生成應用程式，讓我們來看看聊天應用程式。

聊天應用程式已經成為我們日常生活的一部分，不僅僅是提供休閒交流的方式。它們是客戶服務、技術支持，甚至是複雜諮詢系統的重要組成部分。很可能你最近就曾從聊天應用程式中獲得幫助。隨著我們將更先進的技術如生成式 AI 整合到這些平台中，複雜性增加了，挑戰也隨之而來。

我們需要回答的一些問題是：

- **構建應用程式**。如何有效地構建並無縫整合這些 AI 驅動的應用程式以滿足特定的使用案例？
- **監控**。部署後，我們如何監控並確保應用程式在功能和遵循[負責任 AI 的六項原則](https://www.microsoft.com/ai/responsible-ai?WT.mc_id=academic-105485-koreyst)方面運行在最高質量水平？

隨著我們進入一個由自動化和無縫人機交互定義的時代，了解生成式 AI 如何改變聊天應用程式的範疇、深度和適應性變得至關重要。本課程將探討支持這些複雜系統的架構方面，深入研究如何針對特定領域任務進行微調的方法，並評估確保負責任 AI 部署的相關指標和考量。

## 介紹

本課程涵蓋：

- 高效構建和整合聊天應用程式的技術。
- 如何對應用程式進行定制和微調。
- 有效監控聊天應用程式的策略和考量。

## 學習目標

完成本課程後，你將能夠：

- 描述將聊天應用程式構建並整合到現有系統中的考量。
- 為特定使用案例定制聊天應用程式。
- 確定關鍵指標和考量，以有效監控和維護 AI 驅動的聊天應用程式的質量。
- 確保聊天應用程式負責任地利用 AI。

## 將生成式 AI 整合到聊天應用程式中

透過生成式 AI 提升聊天應用程式不僅僅是讓它們更聰明；它是關於優化其架構、性能和用戶界面，以提供高質量的用戶體驗。這涉及調查架構基礎、API 整合和用戶界面的考量。本節旨在為你提供一個全面的路線圖，以導航這些複雜的領域，無論你是將它們整合到現有系統中還是作為獨立平台構建它們。

完成本節後，你將具備高效構建和整合聊天應用程式所需的專業知識。

### 聊天機器人還是聊天應用程式？

在我們深入構建聊天應用程式之前，讓我們比較一下「聊天機器人」和「AI 驅動的聊天應用程式」，它們扮演著不同的角色和功能。聊天機器人的主要目的是自動化特定的對話任務，如回答常見問題或跟踪包裹。它通常由基於規則的邏輯或複雜的 AI 算法控制。相比之下，AI 驅動的聊天應用程式是一個更廣泛的環境，旨在促進各種形式的數字通信，如文本、語音和視頻聊天。其特徵在於整合了生成式 AI 模型，模擬細緻入微的類人對話，根據多種輸入和上下文線索生成回應。生成式 AI 驅動的聊天應用程式可以參與開放領域的討論，適應不斷變化的對話背景，甚至生成創造性或複雜的對話。

下表概述了它們在數字通信中的獨特角色的主要差異和相似之處。

| 聊天機器人                          | 生成式 AI 驅動的聊天應用程式           |
| ----------------------------------- | -------------------------------------- |
| 任務導向和基於規則                  | 上下文感知                             |
| 通常整合到更大的系統中              | 可以承載一個或多個聊天機器人           |
| 限於編程功能                        | 整合生成式 AI 模型                     |
| 專門化和結構化互動                  | 能夠進行開放領域的討論                 |

### 利用 SDK 和 API 的預建功能

在構建聊天應用程式時，首先評估現有的資源是一個很好的起點。使用 SDK 和 API 來構建聊天應用程式是一種有利的策略，原因有很多。通過整合文檔詳盡的 SDK 和 API，你在戰略上將應用程式定位於長期成功，解決可擴展性和維護方面的問題。

- **加速開發過程並減少開銷**：依賴預建功能而不是自行構建昂貴的過程，讓你能專注於應用程式的其他重要方面，如業務邏輯。
- **更好的性能**：在從頭構建功能時，你最終會問自己「它如何擴展？這個應用程式是否能夠處理突然的用戶激增？」維護良好的 SDK 和 API 通常內置了解決這些問題的方案。
- **更容易的維護**：更新和改進更容易管理，因為大多數 API 和 SDK 只需在發布新版本時更新庫。
- **接觸尖端技術**：利用經過微調和訓練的大型數據集的模型，為你的應用程式提供自然語言能力。

訪問 SDK 或 API 的功能通常涉及獲得使用提供服務的許可，這通常是通過使用唯一的密鑰或身份驗證令牌。我們將使用 OpenAI Python 庫來探索這種情況。你也可以在以下[OpenAI 筆記本](../../../07-building-chat-applications/python/oai-assignment.ipynb)或[Azure OpenAI Services 筆記本](../../../07-building-chat-applications/python/aoai-assignment.ipynb)中自己試試。

```python
import os
from openai import OpenAI

API_KEY = os.getenv("OPENAI_API_KEY","")

client = OpenAI(
    api_key=API_KEY
    )

chat_completion = client.chat.completions.create(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Suggest two titles for an instructional lesson on chat applications for generative AI."}])
```

上面的示例使用 GPT-3.5 Turbo 模型來完成提示，但注意在這之前已經設置了 API 密鑰。如果未設置密鑰，你會收到錯誤。

## 用戶體驗 (UX)

一般的 UX 原則適用於聊天應用程式，但由於涉及機器學習的組件，以下是一些特別重要的考量。

- **處理模糊的機制**：生成式 AI 模型偶爾會生成模糊的答案。讓用戶能夠要求澄清的功能可以在他們遇到這個問題時提供幫助。
- **上下文保留**：先進的生成式 AI 模型具有在對話中記住上下文的能力，這對用戶體驗來說可能是必要的資產。讓用戶能夠控制和管理上下文可以改善用戶體驗，但也引入了保留敏感用戶信息的風險。考量信息存儲的時間，如引入保留政策，可以在需要上下文和隱私之間取得平衡。
- **個性化**：AI 模型具有學習和適應的能力，為用戶提供個性化的體驗。通過用戶資料等功能定制用戶體驗，不僅讓用戶感到被理解，還有助於他們尋找特定答案，創造更高效和令人滿意的互動。

一個個性化的例子是 OpenAI 的 ChatGPT 中的「自定義指令」設置。它允許你提供關於自己的信息，這些信息可能是你提示的重要上下文。以下是自定義指令的示例。

這個「資料」提示 ChatGPT 創建一個關於鏈表的課程計劃。注意 ChatGPT 考慮到用戶可能想要基於她的經驗進行更深入的課程計劃。

### 微軟大型語言模型的系統消息框架

[微軟提供了指導](https://learn.microsoft.com/azure/ai-services/openai/concepts/system-message#define-the-models-output-format?WT.mc_id=academic-105485-koreyst)以撰寫有效的系統消息，當從 LLMs 生成回應時，分為四個方面：

1. 定義模型的目標對象及其能力和限制。
2. 定義模型的輸出格式。
3. 提供具體示例以展示模型的預期行為。
4. 提供額外的行為防範措施。

### 可及性

無論用戶有視覺、聽覺、運動或認知障礙，設計良好的聊天應用程式應該是所有人都能使用的。以下列表分解了旨在增強各種用戶障礙的可及性功能。

- **視覺障礙功能**：高對比度主題和可調大小的文本，屏幕閱讀器兼容性。
- **聽覺障礙功能**：文本到語音和語音到文本功能，音頻通知的視覺提示。
- **運動障礙功能**：鍵盤導航支持，語音命令。
- **認知障礙功能**：簡化語言選項。

## 定制和微調領域特定語言模型

想像一個聊天應用程式，能夠理解你公司的行話並預測其用戶群常見的具體問題。有幾種值得一提的方法：

- **利用 DSL 模型**。DSL 代表領域特定語言。你可以利用所謂的 DSL 模型，這是一個在特定領域訓練的模型，能夠理解其概念和場景。
- **應用微調**。微調是使用特定數據進一步訓練模型的過程。

## 定制：使用 DSL

利用領域特定語言模型 (DSL Models) 可以通過提供專業的、上下文相關的互動來增強用戶參與度。這是一個經過訓練或微調的模型，能夠理解和生成與特定領域、行業或主題相關的文本。使用 DSL 模型的選擇可能從從零開始訓練到通過 SDK 和 API 使用現有模型不等。另一個選擇是微調，即採用現有的預訓練模型並將其調整為特定領域。

## 定制：應用微調

當預訓練模型在專門領域或特定任務中表現不佳時，通常會考慮微調。

例如，醫學查詢很複雜，需要大量上下文。當醫療專業人員診斷患者時，通常基於多種因素，如生活方式或既往病情，甚至可能依賴最近的醫學期刊來驗證診斷。在這種細微的情況下，通用 AI 聊天應用程式不能成為可靠的來源。

### 情境：醫療應用程式

考慮一個設計用於協助醫療從業者的聊天應用程式，提供治療指南、藥物相互作用或最新研究結果的快速參考。

通用模型可能足以回答基本醫學問題或提供一般建議，但可能在以下方面存在困難：

- **高度具體或複雜的案例**。例如，神經科醫生可能會詢問應用程式「目前管理兒科患者耐藥性癲癇的最佳做法是什麼？」
- **缺乏最近的進展**。通用模型可能難以提供包含神經科學和藥理學最新進展的答案。

在這些情況下，使用專門的醫學數據集微調模型可以顯著提高其處理這些複雜醫學查詢的能力和可靠性。這需要訪問大量且相關的數據集，代表需要解決的領域特定挑戰和問題。

## 高品質 AI 驅動聊天體驗的考量

本節概述了「高品質」聊天應用程式的標準，包括可操作的指標的捕獲以及遵循負責任地利用 AI 技術的框架。

### 關鍵指標

為了保持應用程式的高品質性能，跟踪關鍵指標和考量至關重要。這些測量不僅確保應用程式的功能，還評估 AI 模型和用戶體驗的質量。以下是涵蓋基本、AI 和用戶體驗指標的列表。

| 指標                             | 定義                                                                                                             | 聊天開發者的考量                                                        |
| -------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------- |
| **運行時間**                     | 測量應用程式運行和可被用戶訪問的時間。                                                                          | 如何最大化運行時間？                                                    |
| **響應時間**                     | 應用程式對用戶查詢的回應時間。                                                                                  | 如何優化查詢處理以改善響應時間？                                        |
| **精確度**                       | 真正確預測的比例與預測的總正比例。                                                                              | 如何驗證模型的精確度？                                                  |
| **召回率（敏感性）**             | 真正確預測的比例與實際正比例。                                                                                  | 如何衡量和改善召回率？                                                  |
| **F1 分數**                      | 精確度和召回率的調和平均，平衡兩者之間的取捨。                                                                  | 你的目標 F1 分數是多少？如何平衡精確度和召回率？                       |
| **困惑度**                       | 測量模型預測的概率分布與實際數據分布的對齊程度。                                                                | 如何最大限度地減少困惑度？                                              |
| **用戶滿意度指標**               | 測量用戶對應用程式的感知。通常通過調查收集。                                                                    | 多頻繁收集用戶反饋？如何根據反饋進行調整？                              |
| **錯誤率**                       | 模型在理解或輸出時犯錯的比率。                                                                                  | 你有哪些策略來降低錯誤率？                                              |
| **重新訓練周期**                 | 更新模型以納入新數據和見解的頻率。                                                                              | 多頻繁重新訓練模型？什麼會觸發重新訓練周期？                            |
| **異常檢測**                     | 用於識別不符合預期行為的異常模式的工具和技術。                                                                  | 如何應對異常？                                                          |

### 在聊天應用程式中實施負責任的 AI 實踐

微軟的負責任 AI 方法已確定六項原則，應指導 AI 的開發和使用。以下是原則、微軟的定義以及聊天開發者應考量的內容及其重要性。

| 原則                     | 微軟的定義                                        | 聊天開發者的考量                                                 | 為什麼重要                                                                            |
| ------------------------ | ------------------------------------------------- | ---------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| 公平性                   | AI 系統應公平對待所有人。                         | 確保聊天應用程式不會基於用戶數據進行歧視。                       | 建立用戶的信任和包容性；避免法律責任。                                                 |
| 可靠性和安全性           | AI 系統應可靠和安全地運行。                       | 實施測試和故障保護以最小化錯誤和風險。                           | 確保用戶滿意度並防止潛在的危害。                                                       |
| 隱私和安全性             | AI 系統應安全並尊重隱私。                         | 實施強加密和數據保護措施。                                       | 保護敏感用戶數據並遵守隱私法律。                                                       |
| 包容性                   | AI 系統應賦予每個人權力並與人們互動。             | 設計可及且易於使用的 UI/UX，以適應多樣化的受眾。                  | 確保更廣泛的人群能夠有效地使用應用程式。                                               |
| 透明性                   | AI 系統應可理解。                                 | 提供清晰的文檔和 AI 回應的理由。                                  | 用戶更可能信任系統，如果他們能夠理解決策的制定過程。                                 |
| 責任性                   | 人們應對 AI 系統負責。                             | 建立明確的過程以審計和改善 AI 決策。                              | 在出錯時能夠進行持續改進和糾正措施。                                                   |

## 作業

查看[作業](../../../07-building-chat-applications/python)，它將帶你完成一系列練習，從

**免責聲明**：  
本文件使用 AI 翻譯服務 [Co-op Translator](https://github.com/Azure/co-op-translator) 進行翻譯。我們力求準確，但請注意，自動翻譯可能包含錯誤或不準確之處。應以原文文件作為權威來源。對於關鍵信息，建議尋求專業人工翻譯。我們對於因使用此翻譯而產生的任何誤解或誤釋不承擔責任。